{% extends 'base.html' %}

{% block content %}
    <div class="section">
        <br>
        <!-- Profile name -->
        <div class="row">
            <div class="col s12 center profile-title-text">
                <h4>{{ user_data.username|upper }}</h4>
            </div>
        </div>


        <div class="row">
            <div class="col m3 center">
                <!-- Profile image -->
                <div class="row">
                    <div class="col s12">
                        {% if not user_data.profile_image %}
                            <!-- default image -->
                            <img class=" profile-img-lg"
                                 src="https://res.cloudinary.com/dajuujhvs/image/upload/v1591278246/homechopped/profile-pics/default_pic.png"
                                 alt="profile image">
                        {% else %}
                            <!-- users image -->
                            <img class=" profile-img-lg"
                                 src="{{ user_data.profile_image }}"
                                 alt="profile image">
                        {% endif %}
                    </div>
                </div>
                <!-- Profile image upload -->
                <div class="row">
                    <div class="col s12">
                        <form class='col s12' method="POST"
                              action="{{ url_for('upload_profile_image',user_id=user_data._id) }}"
                              enctype="multipart/form-data">
                            <div class="row file-field input-field">
                                <!-- filename -->
                                <div class="col s8 file-path-wrapper right">
                                    <input class="file-path validate" type="text">
                                </div>
                                <!-- browse -->
                                <button class="waves-effect waves-light btn grey darken-3 grey-text text-lighten-2 right profile-link-btn"
                                        type="file" name="file">
                                    Browse
                                    <input type="file" name="file" onchange="this.form.submit()">
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- Edit Bio -->
            <div class="col m6">

                <form class="col s12" method="POST"
                      action="{{ url_for('update_profile',user_id=user_data._id) }}">
                    <div class="row">
                        <div class="input-field ">
                            <textarea id="textarea1" class="materialize-textarea"
                                      name="bio">{{ user_data.bio }}</textarea>
                            <label for="textarea1 " class="edit-textarea-label">Bio</label>
                        </div>
                    </div>
                    <div>

                        <button class="waves-effect waves-light btn grey darken-3 grey-text text-lighten-2 right profile-link-btn"
                                type="submit" name="action">
                            Submit
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col s12">
                <!-- Delete Modal Trigger -->
                <a class="btn-floating btn-large waves-effect waves-light grey darken-3 grey-text text-lighten-2 del-profile right modal-trigger"
                   href="#delete-profile-modal"><i class="far fa-trash-alt"></i></a>


                <!-- Delete Modal Structure -->
                <div id="delete-profile-modal" class="modal">
                    <div class="modal-content ">

                        <h4>Delete user profile?</h4>
                        <p>Deleting the userprofile is permanent and cannot be undone, <strong>are you sure you want to
                            delete your profile?</strong></p>
                    </div>
                    <div class="modal-footer">
                        <a href="{{ url_for('delete_user',user_id=user_data._id) }}" class="modal-close waves-effect waves-green btn-flat red-text">DELETE</a>
                    </div>
                </div>
            </div>
        </div>

    </div>



{% endblock %}